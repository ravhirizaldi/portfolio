const histories=[],convertImageToASCII=async(e,t,i=!0)=>{let n=document.createElement("canvas"),a=n.getContext("2d"),o=new Image;o.crossOrigin="Anonymous",o.src=e,await new Promise((e,t)=>{o.onload=e,o.onerror=t});let s=o.height/o.width,r=t||Math.min(o.width,50),l=Math.round(r*s);n.width=r,n.height=l,a.drawImage(o,0,0,n.width,n.height),i&&(a.filter="contrast(150%) brightness(120%) grayscale(100%)");let d=a.getImageData(0,0,n.width,n.height),c="@%#*+=-:. ",p=[];for(let u=0;u<d.height;u++){let m="";for(let g=0;g<d.width;g++){let h=(u*d.width+g)*4,y=d.data[h],f=d.data[h+1],v=d.data[h+2],w=.299*y+.587*f+.114*v,b=Math.floor(w/255*(c.length-1));m+=c[b]}p.push(m)}let k=p.join("\n");return navigator.clipboard.writeText(k),p.join("\n")},commands={help:{description:"Show available commands",delay:4,action:()=>`Available commands:
  ${Object.entries(commands).sort().map(([e,t])=>`  ${e.padEnd(12)} - ${t.description}`).join("\n")}`},imagetoascii:{description:"Convert image to ASCII art",delay:.1,async action(e){let t=async e=>{let t=await fetch(e),i=await t.blob(),n=URL.createObjectURL(i);return n};if(!e||0===e.length)return"Usage: imagetoascii <image-url>\nExample: imagetoascii https://example/image.jpg";{let i=e[0];try{displayOutput("Downloading image...","info");let n=await t(i);displayOutput("Converting image to ASCII...","info");let a=await convertImageToASCII(n);return a}catch(o){return`Error: ${o.message}`}}}},weather:{description:"Check weather for a city",async action(e){if(!e||0===e.length)return"Usage: weather <city>\nExample: weather jakarta";let t=e[0];try{var i;displayOutput("Fetching weather data...","info"),await new Promise(e=>setTimeout(e,1700));let n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&appid=842eb681292f97304b754eac6933acd2&units=metric`);if(!n.ok)throw Error("City not found or weather service unavailable");let a=await n.json();return`
  Weather in ${a.name} (${a.sys.country}):
  - Condition: ${a.weather[0].main} ${({Clear:"☀️",Clouds:"☁️",Rain:"\uD83C\uDF27️",Drizzle:"\uD83C\uDF26️",Thunderstorm:"⛈️",Snow:"\uD83C\uDF28️",Mist:"\uD83C\uDF2B️",Smoke:"\uD83C\uDF2B️",Haze:"\uD83C\uDF2B️",Dust:"\uD83C\uDF2B️",Fog:"\uD83C\uDF2B️",Sand:"\uD83C\uDF2B️",Ash:"\uD83C\uDF2B️",Squall:"\uD83D\uDCA8",Tornado:"\uD83C\uDF2A️"})[i=a.weather[0].main]||"\uD83C\uDF21️"}
  - Temperature: ${a.main.temp}\xb0C
  - Humidity: ${a.main.humidity}%
  - Wind Speed: ${a.wind.speed} m/s
        `}catch(o){return`Error: ${o.message}`}}},about:{description:"Learn about me",delay:4,action:()=>`Hi, I'm Ravhi! 
  
  As a skilled and experienced software developer, I have a proven track record of successfully leading high-impact projects, including CRM system migrations, the development of advanced platforms like Kalista Pulse, and transitioning legacy applications to modern, efficient architectures. My expertise lies in modernizing application infrastructures, enhancing performance, and delivering scalable, user-focused solutions.
  
  My leadership experience includes managing cross-functional teams, streamlining workflows, and delivering cutting-edge solutions that align with organizational goals. With a focus on both backend and frontend excellence, I consistently deliver high-quality, reliable, and scalable applications tailored to user requirements.`},experience:{description:"Show my work experience",delay:4,async action(){displayOutput("Fetching experience...","info"),await new Promise(e=>setTimeout(e,1e3));let e=[{title:"Lead Programmer",company:"PT. Kalapa Teknologi Putera",duration:"2022-2024",responsibilities:["Coordinated Across IT and Non-IT Teams: Facilitated effective communication and collaboration between IT teams and other departments.","Developed and Implemented IT Strategies: Led the development and implementation of IT strategies to support business objectives.","Managed IT Projects: Oversaw the planning, execution, and monitoring of IT projects to ensure successful delivery.","Ensured Compliance: Ensured that IT projects and operations complied with relevant laws, regulations, and standards.","Managed IT Budget: Managed the IT budget to ensure that resources were allocated effectively and efficiently.","Led Omni-Channel Marketplace Project: Directed a B2C project focused on developing an Omni-Channel Marketplace platform.","Transformed Database Structure: Migrated application databases from PostgreSQL to MongoDB, optimizing for scalability and flexibility."]},{title:"Senior Web Developer",company:"PT. Palapa Mitra Solusi",duration:"2021-2022",responsibilities:["Implemented dynamic customer data uploads and simplified the existing application flow.","Successfully integrated a softphone into the CRM application, enabling calls through PHP AGI functions in Asterisk.","Implemented Agile Methodologies: Implemented Agile methodologies to improve project management and delivery processes.","Conducted code reviews to ensure code quality, consistency, and compliance with best practices.","Set up and configured a PBX server using Asterisk PBX.","Created a script to automatically initiate recording during the Asterisk dial plan execution."]},{title:"Junior Web Developer",company:"PT. Global Alih Daya",duration:"2019-2021",responsibilities:["Developed and maintained HRIS applications using CodeIgniter frameworks.","Implemented Psychological Test Applications with MBTI and PAPI Kostick methods.","Conducted code reviews and provided feedback to improve code quality.","Assisted in the development of RESTful APIs for web applications.","Created and maintained technical documentation for web applications.","Participated in the planning and execution of software development projects."]},{title:"IT Support Specialist",company:"PT. Vads Indonesia",duration:"2018-2019",responsibilities:["Provided technical support to end-users for hardware, software, and network-related issues.","Installed, configured, and maintained computer systems and software.","Troubleshot and resolved technical issues related to computer systems, software, and networks.","Active Directory Management: Managed user accounts, permissions, and group policies in Active Directory.","Zimbra Email Administration: Administered Zimbra email servers, including user account management and troubleshooting.","Exchange Server Administration: Managed Microsoft Exchange servers, including mailbox management and troubleshooting.","Conducted training sessions for end-users on software applications and IT best practices."]}].map((e,t)=>{let i=e.responsibilities.map(e=>`    * ${e}`).join("\n");return`${t+1}. ${e.title}
   - Company: ${e.company}
   - Duration: ${e.duration}
   - Responsibilities:
  ${i}
  `});return`Work Experience:
  ${e.join("\n")}`}},skills:{description:"View my technical skills",delay:4,async action(){displayOutput("Fetching skills...","info"),await new Promise(e=>setTimeout(e,1e3));let e={Frontend:["Vue.js","React","TypeScript","Tailwind CSS"],Backend:["Node.js","Express.js","Redwood.js","Laravel","CodeIgniter"],Databases:["MongoDB","PostgreSQL","Redis","GraphQL","MySQL"],Cloud:["AWS","GCP","Docker","Kubernetes"],Tools:["Git","Jest","CI/CD","Agile","Scrum"]},t=(e,t)=>e.padEnd(t).slice(0,t),i=Math.max(...Object.keys(e).map(e=>e.length))+2,n=Math.max(...Object.values(e).flat().map(e=>e.length)),a=`┌${"─".repeat(i)}┬${"─".repeat(n)}┐`,o=`└${"─".repeat(i)}┴${"─".repeat(n)}┘`,s=Object.entries(e).map(([e,a])=>{let o=a.map((a,o)=>{let s=0===o?t(e,i):" ".repeat(i);return`│ ${s} │ ${t(a,n)} │`});return o.join("\n")});return[a,...s,o].join("\n")}},projects:{description:"Browse my projects",delay:10,action(){let e=[{title:"\uD83D\uDE80 Kanal Dagang",url:"https://kanaldagang.com",description:["Integrated with Tokopedia, Shopee, Lazada, and TikTok Shop","Automated order processing","Real-time inventory management","Customizable product catalog","Multi-channel sales analytics","Live chat between buyers and sellers from different platforms","Integrated with payment gateways and logistics providers","Built with Node.js, Express.js, MongoDB, Redis, Vue.js, Tailwind CSS"]},{title:"\uD83D\uDCAC Kalista Pulse - WhatsApp Broadcast App",url:"https://pulse.kalapatec.id",description:["WhatsApp API Business integration","Broadcast scheduling","Contact management","Message templates","Analytics dashboard","Built with Vue.js, Express.js, MongoDB, Redis, Tailwind CSS, and Apache Kafka"]},{title:"\uD83C\uDF10 Outbound Telesales CRM",url:"internal application",description:["Webphone integration with Asterisk","Dynamic customer data uploads","Support for multiple campaigns","Call recording and live monitoring","Built with Express.js, Vue.js, PostgreSQL, MongoDB, Tailwind CSS, and Asterisk"]},{title:"\uD83E\uDD16 Android ADB Tool",url:"https://sourceforge.net/projects/android-tools",description:["GUI for Android Debug Bridge (ADB)","Install, uninstall, and manage Android apps","Capture screenshots and screen recordings","Built with VB.Net 2010, ADB, and Android SDK"]},{title:"\uD83D\uDDA5️ Portfolio Terminal",url:"https://ravhirizaldi.github.io/portfolio",description:["Interactive terminal interface","Built-in commands and animations","Responsive design","Built with HTML, CSS, JavaScript"]}].map((e,t)=>{let i=e.description.map(e=>`  - ${e}`).join("\n");return`${t+1}. ${e.title} (${e.url})
  ${i}
  
  `});return`My Projects:
  
  ${e.join("\n")}`}},contact:{description:"Get my contact information",action(){let e={Email:"\uD83D\uDCE7",GitHub:"\uD83D\uDD17",LinkedIn:"\uD83D\uDCBC"},t=Object.entries({Email:"ravhirzld@gmail.com",GitHub:"https://github.com/ravhirzld",LinkedIn:"https://linkedin.com/in/ravhirzld"}).map(([t,i])=>`${e[t]} ${t.padEnd(10)}: ${i}`).join("\n");return`Contact Information:
  ${t}`}},clear:{description:"Clear the console",action:()=>(document.getElementById("output").innerHTML="",displayOutput("Welcome to my portfolio terminal! Type 'help' for available commands.","info"),"")},exit:{description:"Close the terminal",action:()=>(window.close(),"")},useragent:{description:"Show user agent",delay:4,async action(){let e=navigator.userAgent,t=navigator.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)[0],i=navigator.userAgent.match(/(windows|mac|android|linux|iphone|ipad)/i)[0],n=`${window.innerWidth}x${window.innerHeight}`,a=`${screen.colorDepth}-bit`,o=`${screen.pixelDepth}-bit`,s=`${navigator.deviceMemory}GB`,r=navigator.language,l=navigator.languages.join(", "),d=navigator.cookieEnabled,c=navigator.doNotTrack,p=navigator.onLine,u=await navigator.storage.estimate().then(({quota:e})=>`${(e/1073741824).toFixed(2)}GB`),m=[`User Agent: ${e}`,`Browser: ${t}`,`OS: ${i}`,`Display Size: ${n}`,`Color Depth: ${a}`,`Pixel Depth: ${o}`,`Device Memory: ${s}`,`Language: ${r}`,`Languages: ${l}`,`Cookie Enabled: ${d}`,`Do Not Track: ${c}`,`Online: ${p}`,`Storage: ${u}`];return m.join("\n")}},download:{description:"Download my resume",async action(){displayOutput("Downloading resume...","info"),await new Promise(e=>setTimeout(e,1e3));let e=async e=>{let t=await fetch(e),i=await t.blob(),n=URL.createObjectURL(i);return n},t=await e("resume.pdf"),i=document.createElement("a");return i.href=t,i.download="Ravhi_Rizaldi_Resume.pdf",i.click(),URL.revokeObjectURL(t),"Resume downloaded!"}},history:{description:"Show command history",delay:4,action(){let e=histories.map((e,t)=>`${t+1}. ${e}`).join("\n");return`Command History:
  ${e}`}},qrcode:{description:"Generate QR code",delay:1,async action(e){if(!e||0===e.length)return'Usage: qrcode <text>\nExample: qrcode "Hello, World!"';let t=e.join(" ").replace(/"/g,""),i=document.createElement("div");return i.innerHTML=`
        <div id="popup-qr" class="popup-overlay">
          <div class="popup-container">
            <h2 class="popup-title">QR Code</h2>
            <div id="qrcode" class="popup-qrcode">
              <!-- QR Code will be injected here -->
            </div>
            <button id="close-popup" class="popup-close-btn">Close</button>
          </div>
        </div>
      `,document.body.appendChild(i),new QRCode(document.getElementById("qrcode"),{text:t,width:128,height:128}),""}}},outputDiv=document.getElementById("output"),inputField=document.getElementById("input"),suggestionsDiv=document.getElementById("suggestions"),keySound=document.getElementById("key-sound"),volumeButton=document.getElementById("volume-button"),popupButton=document.getElementById("close-popup");let isMuted=!1;document.addEventListener("click",e=>{if("close-popup"===e.target.id){let t=document.getElementById("popup-qr");t.remove(),inputField.focus()}}),volumeButton.addEventListener("click",()=>{isMuted=!isMuted,keySound.muted=isMuted,volumeButton.textContent=isMuted?"\uD83D\uDD07":"\uD83D\uDD0A"}),inputField.addEventListener("keydown",()=>{keySound.currentTime=0,keySound.volume=.2,keySound.play()});let selectedSuggestionIndex=-1;function typeEffect(e,t,i,n=30){let a=0;e.innerHTML="";let o=setInterval(()=>{a<t.length?(e.innerHTML+=t.charAt(a),e.scrollIntoView({behavior:"smooth",block:"end"}),a++):(clearInterval(o),i&&i())},n)}function displayOutput(e,t="",i=30){let n=document.createElement("div");n.className=`output-line ${t}`,outputDiv.appendChild(n),typeEffect(n,e,()=>{inputField.focus()},i),outputDiv.scrollTop=outputDiv.scrollHeight}function showSuggestions(e){let t=Object.keys(commands).filter(t=>t.startsWith(e.toLowerCase())&&t!==e.toLowerCase());t.length&&e?(suggestionsDiv.innerHTML=t.map((e,t)=>`
            <div class="suggestion ${t===selectedSuggestionIndex?"selected":""}" 
                 data-command="${e}">
              ${e} - ${commands[e].description}
            </div>
          `).join(""),suggestionsDiv.style.display="block"):(suggestionsDiv.style.display="none",selectedSuggestionIndex=-1)}inputField.addEventListener("input",e=>{showSuggestions(e.target.value)}),inputField.addEventListener("keydown",e=>{let t=document.querySelectorAll(".suggestion");if("Tab"===e.key){if(e.preventDefault(),t.length>0){let i=t[0].dataset.command;inputField.value=i,suggestionsDiv.style.display="none"}}else if("ArrowUp"===e.key||"ArrowDown"===e.key)e.preventDefault(),t.length>0&&(selectedSuggestionIndex="ArrowUp"===e.key?Math.max(0,selectedSuggestionIndex-1):Math.min(t.length-1,selectedSuggestionIndex+1),showSuggestions(inputField.value));else if("Enter"===e.key){let n=inputField.value.trim();if(inputField.value="",suggestionsDiv.style.display="none",n){displayOutput(`➜ ${n}`,"command");let[a,...o]=n.split(" ");if(commands[a]){histories.push(n),histories.length>10&&histories.shift();let s=commands[a].action(o);s instanceof Promise?s.then(e=>displayOutput(e,"output",commands[a].delay)):displayOutput(s,"output",commands[a].delay)}else displayOutput(`Command not found: ${a}. Type 'help' for available commands.`,"error")}}}),suggestionsDiv.addEventListener("click",e=>{let t=e.target.closest(".suggestion");t&&(inputField.value=t.dataset.command,suggestionsDiv.style.display="none",inputField.focus())}),document.addEventListener("keydown",e=>{e.ctrlKey&&"m"===e.key&&(isMuted=!isMuted,keySound.muted=isMuted,volumeButton.textContent=isMuted?"\uD83D\uDD07":"\uD83D\uDD0A")}),document.addEventListener("copy",e=>e.preventDefault()),document.addEventListener("cut",e=>e.preventDefault()),document.addEventListener("selectstart",e=>e.preventDefault()),window.onload=()=>{displayOutput("Welcome to my portfolio terminal! Type 'help' for available commands.","info",10)};